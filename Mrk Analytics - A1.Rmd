---
title: "Black Friday"
author: "Weicheng Zhang, Zilei Zhang, Maura"
date: "9/24/2018"
output: html_document
---
# Introduction 
The dataset here is a sample of the transactions made in a retail store during "Black Friday". The store wants to know better about the customer purchase behaviour against different products which is useful for them to make the purchasing decision for the next year. 

In this project, we want to: (1)predict the age of the consumer and their targeted goods, (2)figure out the relationship between different category of goods bought. This dataset is also particularly convenient for clustering and maybe (3)find different clusters of consumers within it.

The dataset comes from a competition hosted by Analytics Vidhya.

# Data Description
```{r, echo=TRUE, message=TRUE, warning=FALSE}
BF_sum = BF%>%
  group_by(User_ID)%>%
  mutate(sumP = sum(Purchase))
BF_sum = BF_sum[-c(2)]
BF_sum = BF_sum[-c(8:11)]
BF_sum[!duplicated(BF_sum$User_ID), ]
  

# Data Cleaning
library(readr)
library(tidyverse)
setwd("~/Desktop")
BF<- read_csv("BlackFriday copy.csv")
summary(BF)
## Change the computer data-types of the variables
install.packages('questionr')
library(questionr)
two_way <- data.frame(wtd.table(x = BF$Marital_Status, y=BF$Gender))
names(two_way)[1]<-'Marry'
names(two_way)[2]<-'Gender'
two_way
## Deal with missing data
install.packages("VIM")
library('VIM')
library(dplyr)
data(BF, package = "VIM")
dim(BF)
sum(complete.cases(BF))
aggr(BF,cex.axis = .4)
### Only product category_2 and product category_3 have missing data. It is ok, for individual will not buy all categories. 

## filter and select variables
BF_age1 = BF %>%
  group_by(Age) %>%
  summarize(sumgoods1 = sum(Product_Category_1),
            sumgoods2 = sum(Product_Category_2, na.rm = TRUE),
            sumgoods3 = sum(Product_Category_3, na.rm = TRUE))

  
```
