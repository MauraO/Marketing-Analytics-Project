---
title: "Black Friday"
author: "Weicheng Zhang, Zilei Zhang, Maura Oray, Gloria Zheng"
date: "9/24/2018"
output: html_document
---
#1. Introduction 
The dataset here is a sample of the transactions made in a retail store during "Black Friday". The store wants to know better about the customer purchase behaviour against different products which is useful for them to make the purchasing decision for the next year. 

In this project, we want to: (1)predict the age of the consumer and their targeted goods, (2)figure out the relationship between different category of goods bought. This dataset is also particularly convenient for clustering and maybe (3)find different clusters of consumers within it.

The dataset comes from a competition hosted by Analytics Vidhya.

Group Github url: https://github.com/MauraO/Marketing-Analytics-Project

```{r}
#2.Data Description

library(readr)
library(tidyverse)
library(questionr)
library(VIM)
library(dplyr)

BF <- read_csv("~/Desktop/BUS-256/Marketing Analytics Project/BlackFriday.csv")

#Changing variable types

BF[3:8] = lapply(BF[3:8], factor)

#Missing data

sum(complete.cases(BF)) #There are 164,278 NA values in the dataset
aggr(BF,cex.axis = .4)
BF$Product_Category_2[is.na(BF$Product_Category_2)]<- 0 #Replace NA values in category 2 with zero, indicating that there is no category 2 in that row
BF$Product_Category_3[is.na(BF$Product_Category_3)]<- 0 #Replace NA values in category 3 with zero, indicating that there is no category 3 in that row
```
a. Conceptual measure types
The data set includes the following variables: User_ID (discrete), Product_ID (discrete), Gender (discrete), Age (discrete), Occupation (discrete), City_Category (discrete), Stay_in_Current_City_Years (continuous), Marital_Status (discrete), Product_Category_1 (discrete), Product_Category_2 (discrete), Product_Category_3 (discrete), and finally Purchase (continuous). 

b. Data Cleaning
We first wanted to view the different variable types in our data set, and saw that we had only integers and characters. However, we wanted to change the majority of the variables into factors in order to better analyze the data. Since many of the variables are categorical (for example, age is broken down into categories) factors allow us to properly identify and categorize these variables. 

We also decided to check how many NA values we had. There were 164,278 NA values, representing about 31% of the data set. Since the NA values only occured in the variables Product Category 2 and 3, we decided to replace the NA values with "0" to indicate that a customer only purchased an item in Product Category 1. This intuitively makes sense as customers need not purchase a product in categories 2 or 3. 
```{r}
#3. Summary Statistics and Data Visualizations

#filter and select variables
BF_age1 = BF %>%
  group_by(Age) %>%
  summarize(sumgoods1 = sum(Product_Category_1),
            sumgoods2 = sum(Product_Category_2, na.rm = TRUE),
            sumgoods3 = sum(Product_Category_3, na.rm = TRUE))

#Summary Statistics
```
Note: Boxplots - can do M-F, age categories

BF_sum = BF%>%
  group_by(User_ID)%>%
  mutate(sumP = sum(Purchase))
BF_sum = BF_sum[-c(2)]
BF_sum = BF_sum[-c(8:11)]
BF_sum[!duplicated(BF_sum$User_ID), ]
>>>>>>> Stashed changes
=======
>>>>>>> 1ced2d625b7fa78cf08869dba27484870485b3fb

two_way <- data.frame(wtd.table(x = BF$Marital_Status, y=BF$Gender))
names(two_way)[1]<-'Marry'
names(two_way)[2]<-'Gender'
two_way
